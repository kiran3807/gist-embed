!function(t){function e(t){var e,i,s=[];if("number"==typeof t)s.push(t);else{i=t.split(",");for(var n=0;n<i.length;n++)if(e=i[n].split("-"),2===e.length)for(var a=parseInt(e[0],10);a<=e[1];a++)s.push(a);else 1===e.length&&s.push(parseInt(e[0],10))}return s}t.fn.gist=function(){return this.each(function(){var i,s,n,a,l,d,o,r,h,g=t(this),f={};return g.css("display","block"),i=g.data("gist-id")||"",n=g.data("gist-file"),d=g.data("gist-hide-footer")===!0,o=g.data("gist-hide-line-numbers")===!0,a=g.data("gist-line"),l=g.data("gist-highlight-line"),h=g.data("gist-show-spinner")===!0,r=h?!1:void 0!==g.data("gist-show-loading")?g.data("gist-show-loading"):!0,n&&(f.file=n),i?(s="https://gist.github.com/"+i+".json",loading="Loading gist "+s+(f.file?", file: "+f.file:"")+"...",r&&g.html(loading),h&&g.html('<img style="display:block;margin-left:auto;margin-right:auto"  alt="'+loading+'" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32.gif">'),void t.ajax({url:s,data:f,dataType:"jsonp",timeout:1e4,success:function(i){var n,r,h,f,c;i&&i.div?(i.stylesheet&&(0===i.stylesheet.indexOf("<link")?i.stylesheet=i.stylesheet.replace(/\\/g,"").match(/href=\"([^\s]*)\"/)[1]:0!==i.stylesheet.indexOf("http")&&(0!==i.stylesheet.indexOf("/")&&(i.stylesheet="/"+i.stylesheet),i.stylesheet="https://gist.github.com"+i.stylesheet)),i.stylesheet&&0===t('link[href="'+i.stylesheet+'"]').length&&(n=document.createElement("link"),r=document.getElementsByTagName("head")[0],n.type="text/css",n.rel="stylesheet",n.href=i.stylesheet,r.insertBefore(n,r.firstChild)),c=t(i.div),c.removeAttr("id"),g.html("").append(c),l&&(f=e(l),c.find("td.line-data").css({width:"100%"}),c.find(".js-file-line").each(function(e){-1!==t.inArray(e+1,f)&&t(this).css({"background-color":"rgb(255, 255, 204)"})})),a&&(h=e(a),c.find(".js-file-line").each(function(e){-1===t.inArray(e+1,h)&&t(this).parent().remove()})),d&&(c.find(".gist-meta").remove(),c.find(".gist-data").css("border-bottom","0px"),c.find(".gist-file").css("border-bottom","1px solid #ddd")),o&&c.find(".js-line-number").remove()):g.html("Failed loading gist "+s)},error:function(t,e){g.html("Failed loading gist "+s+": "+e)}})):!1})},t(function(){t("[data-gist-id]").gist()})}(jQuery);
